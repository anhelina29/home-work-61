# Express Server –∑ Middleware

–¶–µ REST API —Å–µ—Ä–≤–µ—Ä, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ Node.js —Ç–∞ Express.js –∑ –ø–æ–≤–Ω–æ—é —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è, –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏.

## üìã –ó–º—ñ—Å—Ç

- [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
- [–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å](#—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [API –ú–∞—Ä—à—Ä—É—Ç–∏](#api-–º–∞—Ä—à—Ä—É—Ç–∏)
- [Middleware](#middleware)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ—î–∫—Ç—É)

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Node.js** - —Å–µ—Ä–≤–µ—Ä–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è JavaScript
- **Express.js** v5.2.1 - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **express-session** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏
- **nodemon** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ (dev)

## ‚ú® –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### Middleware
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö HTTP –∑–∞–ø–∏—Ç—ñ–≤
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è POST/PUT –∑–∞–ø–∏—Ç—ñ–≤
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - –∑–∞—Ö–∏—Å—Ç –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É** - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –¥–æ –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–µ—Å—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ 404 —Ç–∞ 500

### MVC –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–∞—Ç–µ—Ä–Ω Model-View-Controller:
- **Controllers** - –æ–±—Ä–æ–±–∫–∞ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏
- **Routers** - –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç—ñ–≤ —Ç–∞ middleware
- **Middleware** - –ø—Ä–æ–º—ñ–∂–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –í–∏–º–æ–≥–∏
- Node.js –≤–µ—Ä—Å—ñ—ó 14.x –∞–±–æ –≤–∏—â–µ
- npm –∞–±–æ yarn

### –ö—Ä–æ–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π** (–∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø—Ä–æ—î–∫—Ç)
```bash
git clone <repository-url>
cd home-work-61
```

2. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**
```bash
npm install
```

## üöÄ –ó–∞–ø—É—Å–∫

### –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ (–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º)
```bash
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
```bash
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ **http://localhost:3000**

## üì° API –ú–∞—Ä—à—Ä—É—Ç–∏

### –ì–æ–ª–æ–≤–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç

#### `GET /`
–ü—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```
Welcome to the server!
```

---

## üë• Users API

–ë–∞–∑–æ–≤–∏–π URL: `/api/users`

### `GET /api/users`
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

**Middleware:** –õ–æ–≥—É–≤–∞–Ω–Ω—è

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": [
    { "id": 1, "name": "John" },
    { "id": 2, "name": "Steve" }
  ]
}
```

---

### `GET /api/users/:id`
–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID.

**Middleware:** –õ–æ–≥—É–≤–∞–Ω–Ω—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": { "id": 1, "name": "John" }
}
```

---

### `POST /api/users`
–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

**Middleware:** 
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "name": "New User"
}
```

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- `name` - –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ, —Ä—è–¥–æ–∫, –º—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (—É—Å–ø—ñ—Ö):**
```json
{
  "id": "uuid",
  "name": "New User"
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (–ø–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó):**
```json
{
  "message": "Name is required"
}
```

---

### `POST /api/users/:id`
–û–Ω–æ–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID (POST –º–µ—Ç–æ–¥).

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**Headers:**
- `x-user-id` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "name": "Updated Name"
}
```

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- `name` - –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ, —Ä—è–¥–æ–∫, –º—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó):**
```json
{
  "message": "Unauthorized"
}
```

---

### `PUT /api/users/:id`
–û–Ω–æ–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID.

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**Headers:**
- `x-user-id` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "name": "Updated Name"
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": {
    "id": "1",
    "name": "Updated Name"
  }
}
```

---

### `DELETE /api/users/:id`
–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID.

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**Headers:**
- `x-user-id` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": "Delete user by id - 1"
}
```

---

## üõç Products API

–ë–∞–∑–æ–≤–∏–π URL: `/api/products`

### `GET /api/products`
–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤.

**Middleware:** –õ–æ–≥—É–≤–∞–Ω–Ω—è

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": [
    { "id": 11, "title": "Product 1" },
    { "id": 12, "title": "Product 2" }
  ]
}
```

---

### `GET /api/products/:id`
–û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID.

**Middleware:** –õ–æ–≥—É–≤–∞–Ω–Ω—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –ø—Ä–æ–¥—É–∫—Ç—É

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": { "id": 11, "title": "Product 1" }
}
```

---

### `POST /api/products`
–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç.

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "title": "New Product"
}
```

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- `title` - –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ, —Ä—è–¥–æ–∫, –º—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": "Post product by id - undefined"
}
```

---

### `POST /api/products/:id`
–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID (POST –º–µ—Ç–æ–¥).

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –ø—Ä–æ–¥—É–∫—Ç—É

**Headers:**
- `x-user-role` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header, –º–∞—î –±—É—Ç–∏ "admin"

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "title": "Updated Product"
}
```

**–í–∞–ª—ñ–¥–∞—Ü—ñ—è:**
- `title` - –æ–±–æ–≤'—è–∑–∫–æ–≤–µ –ø–æ–ª–µ, —Ä—è–¥–æ–∫, –º—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (–±–µ–∑ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É):**
```json
{
  "message": "Forbidden"
}
```

---

### `PUT /api/products/:id`
–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID.

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –ø—Ä–æ–¥—É–∫—Ç—É

**Headers:**
- `x-user-role` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header, –º–∞—î –±—É—Ç–∏ "admin"

**–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É:**
```json
{
  "title": "Updated Product"
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "data": {
    "id": "1",
    "title": "Updated Product"
  }
}
```

---

### `DELETE /api/products/:id`
–í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç –∑–∞ ID.

**Middleware:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `id` - ID –ø—Ä–æ–¥—É–∫—Ç—É

**Headers:**
- `x-user-role` - –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π header, –º–∞—î –±—É—Ç–∏ "admin"

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (—É—Å–ø—ñ—Ö):**
```json
{
  "data": "Delete product by id - 1"
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å (–±–µ–∑ –ø—Ä–∞–≤):**
```json
{
  "message": "Forbidden"
}
```

---

## üîí Middleware

### 1. –õ–æ–≥—É–≤–∞–Ω–Ω—è (`logMiddleware`)
**–§–∞–π–ª:** `api/middleware.js`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ª–æ–≥—É—î –≤—Å—ñ HTTP –∑–∞–ø–∏—Ç–∏ –∑ timestamp, –º–µ—Ç–æ–¥–æ–º —Ç–∞ URL.

**–ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—É:**
```
2026-01-05T21:09:07.555Z GET /api/users
```

---

### 2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (`usersValidator`)
**–§–∞–π–ª:** `api/users/usersValidator.js`

**–§—É–Ω–∫—Ü—ñ—ó:**
- `postUsersValidator` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `putUsersValidator` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ü—Ä–∞–≤–∏–ª–∞:**
- –ü–æ–ª–µ `name` –æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- –ú–∞—î –±—É—Ç–∏ —Ä—è–¥–∫–æ–º
- –ú—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏ (–ø—ñ—Å–ª—è trim)

---

### 3. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ (`productsValidator`)
**–§–∞–π–ª:** `api/products/productsValidator.js`

**–§—É–Ω–∫—Ü—ñ—ó:**
- `postProductsValidator` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—É
- `putProductsValidator` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—É

**–ü—Ä–∞–≤–∏–ª–∞:**
- –ü–æ–ª–µ `title` –æ–±–æ–≤'—è–∑–∫–æ–≤–µ
- –ú–∞—î –±—É—Ç–∏ —Ä—è–¥–∫–æ–º
- –ú—ñ–Ω—ñ–º—É–º 3 —Å–∏–º–≤–æ–ª–∏ (–ø—ñ—Å–ª—è trim)

---

### 4. –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (`usersAuth`)
**–§–∞–π–ª:** `api/users/users.auth.js`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å header `x-user-id` –≤ –∑–∞–ø–∏—Ç—ñ.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** POST, PUT, DELETE –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏

---

### 5. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É (`productAccess`)
**–§–∞–π–ª:** `api/products/productsAccess.js`

–ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ header `x-user-role` –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è `admin`.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** POST, PUT, DELETE –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

---

### 6. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
**–§–∞–π–ª:** `api/index.router.js`

**404 Not Found** - –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤
```json
{
  "message": "Not Found"
}
```

**500 Internal Server Error** - –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
```json
{
  "message": "Internal Server Error"
}
```

---

### 7. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏
**–§–∞–π–ª:** `server.js`

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `express-session` –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —Å–µ—Å—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
- `secret`: 'secret-key'
- `resave`: false
- `saveUninitialized`: true

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
home-work-61/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ middleware.js              # –õ–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ index.router.js            # –ì–æ–ª–æ–≤–Ω–∏–π —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.router.js        # –ú–∞—Ä—à—Ä—É—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ctrl.js          # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.auth.js          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usersValidator.js      # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ products/
‚îÇ       ‚îú‚îÄ‚îÄ products.router.js     # –ú–∞—Ä—à—Ä—É—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ products.ctrl.js       # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ productsAccess.js      # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
‚îÇ       ‚îî‚îÄ‚îÄ productsValidator.js   # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
‚îú‚îÄ‚îÄ server.js                      # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ package.json                   # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—É
‚îî‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

---

## üß™ –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```bash
curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{"name":"John Doe"}'
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```bash
curl http://localhost:3000/api/users
```

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É (–ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø—Ä–∞–≤–∞ admin)
```bash
curl -X DELETE http://localhost:3000/api/products/1 \
  -H "Content-Type: application/json" \
  -H "x-user-role: admin"
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)
```bash
curl -X PUT http://localhost:3000/api/users/1 \
  -H "Content-Type: application/json" \
  -H "x-user-id: testuser" \
  -d '{"name":"Updated Name"}'
```

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- –í—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON
- –°–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É 3000
- –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ø–∞–º'—è—Ç—ñ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ)
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–ü—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ —è–∫ –¥–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –∫—É—Ä—Å—É Hillel.

---

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC
